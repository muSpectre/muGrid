<!doctype html>
<html class="no-js" lang="en" data-content_root="./">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="index" title="Index" href="genindex.html" /><link rel="search" title="Search" href="search.html" /><link rel="next" title="Coding Convention" href="CodingConvention.html" /><link rel="prev" title="Python Bindings" href="Python.html" />

    <!-- Generated with Sphinx 8.1.3 and Furo 2024.08.06 -->
        <title>C++ Bindings - µGrid 0.92.6-14-g5a5fac5 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo.css?v=354aac6f" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo-extensions.css?v=302659d7" />
    
    


<style>
  body {
    --color-code-background: #eeffcc;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-with-moon" viewBox="0 0 24 24">
    <title>Auto light/dark, in light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path style="opacity: 50%" d="M 5.411 14.504 C 5.471 14.504 5.532 14.504 5.591 14.504 C 3.639 16.319 4.383 19.569 6.931 20.352 C 7.693 20.586 8.512 20.551 9.25 20.252 C 8.023 23.207 4.056 23.725 2.11 21.184 C 0.166 18.642 1.702 14.949 4.874 14.536 C 5.051 14.512 5.231 14.5 5.411 14.5 L 5.411 14.504 Z"/>
      <line x1="14.5" y1="3.25" x2="14.5" y2="1.25"/>
      <line x1="14.5" y1="15.85" x2="14.5" y2="17.85"/>
      <line x1="10.044" y1="5.094" x2="8.63" y2="3.68"/>
      <line x1="19" y1="14.05" x2="20.414" y2="15.464"/>
      <line x1="8.2" y1="9.55" x2="6.2" y2="9.55"/>
      <line x1="20.8" y1="9.55" x2="22.8" y2="9.55"/>
      <line x1="10.044" y1="14.006" x2="8.63" y2="15.42"/>
      <line x1="19" y1="5.05" x2="20.414" y2="3.636"/>
      <circle cx="14.5" cy="9.55" r="3.6"/>
    </svg>
  </symbol>
  <symbol id="svg-moon-with-sun" viewBox="0 0 24 24">
    <title>Auto light/dark, in dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path d="M 8.282 7.007 C 8.385 7.007 8.494 7.007 8.595 7.007 C 5.18 10.184 6.481 15.869 10.942 17.24 C 12.275 17.648 13.706 17.589 15 17.066 C 12.851 22.236 5.91 23.143 2.505 18.696 C -0.897 14.249 1.791 7.786 7.342 7.063 C 7.652 7.021 7.965 7 8.282 7 L 8.282 7.007 Z"/>
      <line style="opacity: 50%" x1="18" y1="3.705" x2="18" y2="2.5"/>
      <line style="opacity: 50%" x1="18" y1="11.295" x2="18" y2="12.5"/>
      <line style="opacity: 50%" x1="15.316" y1="4.816" x2="14.464" y2="3.964"/>
      <line style="opacity: 50%" x1="20.711" y1="10.212" x2="21.563" y2="11.063"/>
      <line style="opacity: 50%" x1="14.205" y1="7.5" x2="13.001" y2="7.5"/>
      <line style="opacity: 50%" x1="21.795" y1="7.5" x2="23" y2="7.5"/>
      <line style="opacity: 50%" x1="15.316" y1="10.184" x2="14.464" y2="11.036"/>
      <line style="opacity: 50%" x1="20.711" y1="4.789" x2="21.563" y2="3.937"/>
      <circle style="opacity: 50%" cx="18" cy="7.5" r="2.169"/>
    </svg>
  </symbol>
  <symbol id="svg-pencil" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-pencil-code">
      <path d="M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4" />
      <path d="M13.5 6.5l4 4" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
  <symbol id="svg-eye" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-eye-code">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0" />
      <path
        d="M11.11 17.958c-3.209 -.307 -5.91 -2.293 -8.11 -5.958c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6c-.21 .352 -.427 .688 -.647 1.008" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>

<a class="skip-to-content muted-link" href="#furo-main-content">Skip to content</a>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="index.html"><div class="brand">µGrid 0.92.6-14-g5a5fac5
 documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
          <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="index.html">
  
  
  <span class="sidebar-brand-text">µGrid 0.92.6-14-g5a5fac5
 documentation</span>
  
</a><form class="sidebar-search-container" method="get" action="search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="Summary.html">Summary</a></li>
<li class="toctree-l1"><a class="reference internal" href="GettingStarted.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="Python.html">Python Bindings</a></li>
<li class="toctree-l1 current current-page"><a class="current reference internal" href="#">C++ Bindings</a></li>
<li class="toctree-l1"><a class="reference internal" href="CodingConvention.html">Coding Convention</a></li>
<li class="toctree-l1"><a class="reference internal" href="CplusplusAPI.html">C++ API Reference</a></li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="view-this-page">
  <a class="muted-link" href="_sources/Cplusplus.rst.txt" title="View this page">
    <svg><use href="#svg-eye"></use></svg>
    <span class="visually-hidden">View this page</span>
  </a>
</div>
<div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
              <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main" id="furo-main-content">
          <section id="c-bindings">
<h1>C++ Bindings<a class="headerlink" href="#c-bindings" title="Link to this heading">¶</a></h1>
<section id="common-type-aliases">
<h2>Common Type Aliases<a class="headerlink" href="#common-type-aliases" title="Link to this heading">¶</a></h2>
<p>As the lowest-level component of <em>µ</em>Spectre, <em>µ</em>Grid defines all commonly
used type aliases and data structures used throuhgout the project. The most
common aliases are described below, but it is worth having a look at the file
<a class="reference external" href="https://github.com/muSpectre/muGrid/blob/main/src/libmugrid/grid_common.hh">grid_common.hh</a>
for details.</p>
<p>All mathematical calculations should use these types.</p>
<dl>
<dt class="sig sig-object cpp">
<span class="target" id="group__Scalars"></span><em><span class="pre">group</span></em> <span class="sig-name descname"><span class="pre">Scalars</span></span></dt>
<dd><div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-typedefs">Typedefs</p>
<dl class="cpp type">
<dt class="sig sig-object cpp" id="_CPPv45Dim_t">
<span id="_CPPv35Dim_t"></span><span id="_CPPv25Dim_t"></span><span id="Dim_t"></span><span class="target" id="group__Scalars_1gadb9abd11d65aa4aceb8c353c9ffc73c8"></span><span class="k"><span class="pre">typedef</span></span><span class="w"> </span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">Dim_t</span></span></span><a class="headerlink" href="#_CPPv45Dim_t" title="Link to this definition">¶</a><br /></dt>
<dd><p>A type alias for signed integers used for static dimensions. </p>
<p>This type alias is used to represent signed integers for static dimensions in the µGrid codebase. It is used for consistency throughout the code. It is also capable of representing -1, which is a requirement for Eigen. </p>
</dd></dl>

<dl class="cpp type">
<dt class="sig sig-object cpp" id="_CPPv47Index_t">
<span id="_CPPv37Index_t"></span><span id="_CPPv27Index_t"></span><span id="Index_t"></span><span class="target" id="group__Scalars_1ga5a813730b575f743a76f350d28fa7588"></span><span class="k"><span class="pre">typedef</span></span><span class="w"> </span><span class="n"><span class="pre">Eigen</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">Index</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">Index_t</span></span></span><a class="headerlink" href="#_CPPv47Index_t" title="Link to this definition">¶</a><br /></dt>
<dd><p>A type alias for Eigen::Index used for size-related values. </p>
<p>This type alias is used to represent size-related values in the µGrid codebase. It is used for consistency with Eigen and to handle large arrays that have more indices than can be counted with Dim_t. For example, arrays with dimensions 65536 × 65536 would overflow Dim_t, so Index_t is used instead. </p>
</dd></dl>

<dl class="cpp type">
<dt class="sig sig-object cpp" id="_CPPv44Uint">
<span id="_CPPv34Uint"></span><span id="_CPPv24Uint"></span><span class="target" id="group__Scalars_1ga5620668c16ef9badbbd50fbd59fb45f5"></span><span class="k"><span class="pre">using</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">Uint</span></span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="kt"><span class="pre">unsigned</span></span><span class="w"> </span><span class="kt"><span class="pre">int</span></span><a class="headerlink" href="#_CPPv44Uint" title="Link to this definition">¶</a><br /></dt>
<dd><p>type to use in math for unsigned integers </p>
</dd></dl>

<dl class="cpp type">
<dt class="sig sig-object cpp" id="_CPPv43Int">
<span id="_CPPv33Int"></span><span id="_CPPv23Int"></span><span class="target" id="group__Scalars_1ga47c96ff09f1446c4b08bb84f4fc6ccfe"></span><span class="k"><span class="pre">using</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">Int</span></span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="kt"><span class="pre">int</span></span><a class="headerlink" href="#_CPPv43Int" title="Link to this definition">¶</a><br /></dt>
<dd><p>type to use in math for signed integers </p>
</dd></dl>

<dl class="cpp type">
<dt class="sig sig-object cpp" id="_CPPv44Real">
<span id="_CPPv34Real"></span><span id="_CPPv24Real"></span><span class="target" id="group__Scalars_1gae544f8d20f9e517c8af2fec41155d1dd"></span><span class="k"><span class="pre">using</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">Real</span></span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="kt"><span class="pre">double</span></span><a class="headerlink" href="#_CPPv44Real" title="Link to this definition">¶</a><br /></dt>
<dd><p>type to use in math for real numbers </p>
</dd></dl>

<dl class="cpp type">
<dt class="sig sig-object cpp" id="_CPPv47Complex">
<span id="_CPPv37Complex"></span><span id="_CPPv27Complex"></span><span class="target" id="group__Scalars_1ga02712cb134711288ec32b09df3f7aca7"></span><span class="k"><span class="pre">using</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">Complex</span></span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><a class="reference internal" href="CplusplusAPI.html#_CPPv4St" title="std"><span class="n"><span class="pre">std</span></span></a><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">complex</span></span><span class="p"><span class="pre">&lt;</span></span><a class="reference internal" href="#_CPPv44Real" title="Real"><span class="n"><span class="pre">Real</span></span></a><span class="p"><span class="pre">&gt;</span></span><a class="headerlink" href="#_CPPv47Complex" title="Link to this definition">¶</a><br /></dt>
<dd><p>type to use in math for complex numbers </p>
</dd></dl>

</div>
</dd></dl>

<p>While it is possible to use other types in principle, these are the ones for which all data structures are tested and which are known to work. Also, other <em>µ</em>Spectre developers will expect and understand these types.</p>
<p>Dimensions are counted using the signed integer type <code class="xref cpp cpp-type docutils literal notranslate"><span class="pre">muGrid::Dim_t</span></code>. This is necessary because <a class="reference external" href="eigen.tuxfamily.org">Eigen</a> uses -1 to signify a dynamic number of dimensions.</p>
<p>The types <code class="xref cpp cpp-type docutils literal notranslate"><span class="pre">muGrid::Rcoord_t</span></code> and <code class="xref cpp cpp-type docutils literal notranslate"><span class="pre">muGrid::Ccoord_t</span></code>  are used to represent real-valued coordinates and integer-valued coordinates (i.e., pixel- or cell-coordinates).</p>
<dl>
<dt class="sig sig-object cpp">
<span class="target" id="group__Coordinates"></span><em><span class="pre">group</span></em> <span class="sig-name descname"><span class="pre">Coordinates</span></span></dt>
<dd><div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-typedefs">Typedefs</p>
<dl class="cpp type">
<dt class="sig sig-object cpp" id="_CPPv48Ccoord_t">
<span id="_CPPv38Ccoord_t"></span><span id="_CPPv28Ccoord_t"></span><span id="Ccoord_t"></span><span class="target" id="group__Coordinates_1ga85d0d87dc88ebcd583e0fc6cbde8571c"></span><span class="k"><span class="pre">typedef</span></span><span class="w"> </span><a class="reference internal" href="CplusplusAPI.html#_CPPv4St" title="std"><span class="n"><span class="pre">std</span></span></a><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">array</span></span><span class="p"><span class="pre">&lt;</span></span><a class="reference internal" href="#_CPPv47Index_t" title="Index_t"><span class="n"><span class="pre">Index_t</span></span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="n"><span class="pre">Dim</span></span><span class="p"><span class="pre">&gt;</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">Ccoord_t</span></span></span><a class="headerlink" href="#_CPPv48Ccoord_t" title="Link to this definition">¶</a><br /></dt>
<dd><p>A type alias for cell coordinates. </p>
<p>This type alias represents cell coordinates, which are up to three integer numbers with a fixed dimension. The dimension is determined by the template parameter Dim. The coordinates are stored in a std::array of type Index_t.</p>
<dl class="field-list simple">
<dt class="field-odd">Template Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>Dim</strong> – The dimension of the cell coordinates. It should be between 1 and 3. </p>
</dd>
</dl>
</dd></dl>

<dl class="cpp type">
<dt class="sig sig-object cpp" id="_CPPv48Rcoord_t">
<span id="_CPPv38Rcoord_t"></span><span id="_CPPv28Rcoord_t"></span><span id="Rcoord_t"></span><span class="target" id="group__Coordinates_1ga4d11f393f70f5526a9887b74118bd1fb"></span><span class="k"><span class="pre">typedef</span></span><span class="w"> </span><a class="reference internal" href="CplusplusAPI.html#_CPPv4St" title="std"><span class="n"><span class="pre">std</span></span></a><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">array</span></span><span class="p"><span class="pre">&lt;</span></span><a class="reference internal" href="#_CPPv44Real" title="Real"><span class="n"><span class="pre">Real</span></span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="n"><span class="pre">Dim</span></span><span class="p"><span class="pre">&gt;</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">Rcoord_t</span></span></span><a class="headerlink" href="#_CPPv48Rcoord_t" title="Link to this definition">¶</a><br /></dt>
<dd><p>A type alias for real space coordinates. </p>
<p>This type alias represents real space coordinates, which are up to three floating point numbers with a fixed dimension. The dimension is determined by the template parameter Dim. The coordinates are stored in a std::array of type Real.</p>
<dl class="field-list simple">
<dt class="field-odd">Template Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>Dim</strong> – The dimension of the real space coordinates. It should be between 1 and 3. </p>
</dd>
</dl>
</dd></dl>

</div>
</dd></dl>

<p>These types are also used to define <cite>nb_grid_pts</cite> or spatial lengths for computational domains.</p>
</section>
<section id="field-types">
<h2>Field Types<a class="headerlink" href="#field-types" title="Link to this heading">¶</a></h2>
<p>The most important part of <em>µ</em>Grid to understand is how it handles field data
and access to it. By field we mean the discretisation of a mathematical field on
the grid points, i.e., numerical data associated with all pixels/voxels of an
FFT grid or a subset thereof. The numerical data can be <strong>scalar</strong>,
<strong>vectorial</strong>, <strong>matricial</strong>, <strong>tensorial</strong> or a generic <strong>array</strong> of
<strong>integer</strong>, <strong>real</strong> or <strong>complex</strong> values per pixel.</p>
<p>Fields that are defined on every pixel/voxel of a grid are called <strong>global
fields</strong> while fields defined on a subset of pixels/voxels <strong>local fields</strong>. As
an example, the strain field is a global field for any calculation (it exists in
the entire domain), while for instance the field of an internal (state) variable
of a material in a composite is only defined for the pixels that belong to that
material.</p>
<p>There are several ways in which we interact with fields, and the same field
might be interacted with in different ways by different parts of a
problem. Let’s take the (global) strain field in a three-dimensional finite
strain problem with 255 × 255 × 255 voxels as an example: the solver treats it
as a long vector (of length 3² · 255³), the FFT sees it as a four-dimensional
array of shape 255 × 255 × 255 × 3², and from the constitutive laws’
perspective, it is just a sequence of second-rank tensors (i.e., shape 255³ × 3
× 3).</p>
<p>In order to reconcile these different interpretations without copying data
around, <em>µ</em>Grid splits the concept of a field into three components:</p>
<ul>
<li><p>Storage: The <cite>Field</cite></p>
<p>This refers managing the actual memory in which field data is held. For this,
the storage abstraction needs to know the scalar type of data (<code class="docutils literal notranslate"><span class="pre">Int</span></code>,
<code class="docutils literal notranslate"><span class="pre">Real</span></code>, <code class="docutils literal notranslate"><span class="pre">Complex</span></code>, e.t.c.), the number of pixels/voxels for which the
field is defined, and the number of scalar components per pixel/voxel (e.g., 9
for a second-rank asymmetric tensor in a three-dimensional problem).</p>
<p><em>µ</em>Grid’s abstraction for field data storage is the <strong>field</strong> represented by a
child class of
<code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">FieldBase&lt;FieldCollection_t&gt;</span></code>, see
<a class="reference internal" href="#fields"><span class="std std-ref">Fields</span></a>.</p>
</li>
<li><p>Representation: The <cite>FieldMap</cite></p>
<p>Meaning how to interpret the data at a given pixel/voxel (i.e., is it a
vector, a matrix, …). This will also determine which mathematical operations
can be performed on per-pixel/voxel data. The representation allows also to
iterate over a field pixel/voxel by pixel/voxel.</p>
<p><em>µ</em>Grid’s abstraction for field representations is the <strong>field map</strong>
represented by a child class of <code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">FieldMap&lt;FieldCollection_t,</span>
<span class="pre">Scalar_t,</span> <span class="pre">NbComponents[,</span> <span class="pre">IsConst]&gt;</span></code>, see
<a class="reference internal" href="#field-map"><span class="std std-ref">Field Maps</span></a>.</p>
</li>
<li><p>Per-pixel/voxel access/iteration: The <cite>FieldCollection</cite></p>
<p>Given a pixel/voxel coordinate or index, the position of the associated
pixel/voxel data is a function of the type of field (global or local). Since
the determination procedure is identical for every field defined on the same
domain, this ability (and the associated overhead) can be centralised into a
manager of field collections.</p>
<p><em>µ</em>Grid’s abstraction for field access and management is the <strong>field
collection</strong> represented by the two classes
<a class="reference internal" href="CplusplusAPI.html#_CPPv4N6muGrid20LocalFieldCollectionE" title="muGrid::LocalFieldCollection"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">LocalFieldCollection&lt;Dim&gt;</span></code></a> and
<a class="reference internal" href="CplusplusAPI.html#_CPPv4N6muGrid21GlobalFieldCollectionE" title="muGrid::GlobalFieldCollection"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">GlobalFieldCollection&lt;Dim&gt;</span></code></a>, see
<a class="reference internal" href="#field-collection"><span class="std std-ref">Field Collections</span></a>.</p>
</li>
</ul>
</section>
<section id="fields">
<span id="id1"></span><h2>Fields<a class="headerlink" href="#fields" title="Link to this heading">¶</a></h2>
<p>Fields are where the data is stored, so they are mainly distinguished by the
scalar type they store (<code class="docutils literal notranslate"><span class="pre">Int</span></code>, <code class="docutils literal notranslate"><span class="pre">Real</span></code> or <code class="docutils literal notranslate"><span class="pre">Complex</span></code>), and the number of
components (statically fixed size, or dynamic size).</p>
<p>The most commonly used fields are the statically sized ones,
<code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">TensorField</span></code>,
<code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">MatrixField</span></code>, and the
<code class="xref cpp cpp-type docutils literal notranslate"><span class="pre">ScalarField</span></code> (which is really just a 1×1 matrix
field).</p>
<p>Less commonly, we use the dynamically sized
<a class="reference internal" href="CplusplusAPI.html#_CPPv4I0EN6muGrid10TypedFieldE" title="muGrid::TypedField"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">TypedField</span></code></a>, but more on this later.</p>
<p>Fields have a protected constructor, which means that you cannot directly build
a field object, instead you have to go through the factory function
<code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">make_field&lt;Field_t&gt;(name,</span> <span class="pre">collection)</span></code> (or
<code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">make_statefield&lt;Field_t&gt;(name,</span> <span class="pre">collection)</span></code>
if you’re building a statefield, see <a class="reference internal" href="#state-field"><span class="std std-ref">State or History Variables</span></a>) to create them and you only
receive a reference to the built field. The field itself is stored in a
<code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">std::unique_ptr</span></code> which is registered in and managed by a <a class="reference internal" href="#field-collection"><span class="std std-ref">field
collection</span></a>. This mechanism is meant to ensure that fields are
not copied around or free’d so that <a class="reference internal" href="#field-map"><span class="std std-ref">field maps</span></a> always remain
valid and unambiguously linked to a field.</p>
<p>Fields give access to their bulk memory in form of an
<code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">Eigen::Map</span></code>. This is useful for instance for accessing the global
strain, stress, and tangent moduli fields in the solver.</p>
</section>
<section id="field-maps">
<span id="field-map"></span><h2>Field Maps<a class="headerlink" href="#field-maps" title="Link to this heading">¶</a></h2>
<p>Field maps are light-weight resource handles (meaning they can be created and
destroyed cheaply) that are iterable and provide direct per-pixel/voxel access
to the data stored in the mapped field.</p>
<p>The choice of field map defines the type of reference you obtain when
dereferencing an iterator or using the direct random acccess operator <code class="docutils literal notranslate"><span class="pre">[]</span></code>.</p>
<p>Typically used field maps include:</p>
<blockquote>
<div><ul class="simple">
<li><p><a class="reference internal" href="CplusplusAPI.html#_CPPv4I0_7Mapping_8IterUnitEN6muGrid14ScalarFieldMapE" title="muGrid::ScalarFieldMap"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">ScalarFieldMap</span></code></a>,</p></li>
<li><p><a class="reference internal" href="CplusplusAPI.html#_CPPv4I0_7Mapping_5Dim_t_5Dim_t_8IterUnitEN6muGrid13ArrayFieldMapE" title="muGrid::ArrayFieldMap"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">ArrayFieldMap</span></code></a>,</p></li>
<li><p><a class="reference internal" href="CplusplusAPI.html#_CPPv4I0_7Mapping_5Dim_t_5Dim_t_8IterUnitEN6muGrid14MatrixFieldMapE" title="muGrid::MatrixFieldMap"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">MatrixFieldMap</span></code></a>, and the</p></li>
<li><p><code class="xref cpp cpp-type docutils literal notranslate"><span class="pre">T4MatrixFieldMap</span></code>.</p></li>
</ul>
</div></blockquote>
<p>All of these are fixed size (meaning their size is set at compile time) and
therefore support fast linear algebra on the iterates. There is also a
dynamically sized field map type, the
<code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">TypedFieldMap</span></code> which is useful for debugging
and python bindings. It supports all the features of the fixed-size maps, but
linear algebra on the iterates will be slow because it cannot be effectively
vectorised.</p>
</section>
<section id="field-collections">
<span id="field-collection"></span><h2>Field Collections<a class="headerlink" href="#field-collections" title="Link to this heading">¶</a></h2>
<p>Field collections come in two flavours;
<a class="reference internal" href="CplusplusAPI.html#_CPPv4N6muGrid20LocalFieldCollectionE" title="muGrid::LocalFieldCollection"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">LocalFieldCollection&lt;Dim&gt;</span></code></a> and
<a class="reference internal" href="CplusplusAPI.html#_CPPv4N6muGrid21GlobalFieldCollectionE" title="muGrid::GlobalFieldCollection"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">GlobalFieldCollection&lt;Dim&gt;</span></code></a> and are
templated by the spatial dimension of the problem. They adhere to the interface
defined by their common base class,
<a class="reference internal" href="CplusplusAPI.html#_CPPv4N6muGrid15FieldCollectionE" title="muGrid::FieldCollection"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">FieldCollection</span></code></a>. Both types are
iterable (the iterates are the coordinates of the pixels/voxels for which the
fields of the collection are defiened.</p>
<p>Global field collections need to be given the problem <cite>nb_grid_pts</cite> (i.e. the size
of the grid) at initialisation, while local collections need to be filled with
pixels/voxels through repeated calls to
<a class="reference internal" href="CplusplusAPI.html#_CPPv4N6muGrid20LocalFieldCollection9add_pixelERK6size_t" title="muGrid::LocalFieldCollection::add_pixel"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">add_pixel(pixel)</span></code></a>. At
initialisation, they derive their size from the number of pixels that have been
added.</p>
<p>Fields (State Fields) are identified by their unique name (prefix) and can be retrieved in multiple ways:</p>
<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N6muGrid15FieldCollection9get_fieldERKNSt6stringE">
<span id="_CPPv3N6muGrid15FieldCollection9get_fieldERKNSt6stringE"></span><span id="_CPPv2N6muGrid15FieldCollection9get_fieldERKNSt6stringE"></span><span id="muGrid::FieldCollection::get_field__ssCR"></span><span class="target" id="classmuGrid_1_1FieldCollection_1a6e309ada40aaed213bbc94010def71fb"></span><a class="reference internal" href="CplusplusAPI.html#_CPPv4N6muGrid5FieldE" title="muGrid::Field"><span class="n"><span class="pre">Field</span></span></a><span class="w"> </span><span class="p"><span class="pre">&amp;</span></span><span class="sig-prename descclassname"><a class="reference internal" href="CplusplusAPI.html#_CPPv46muGrid" title="muGrid"><span class="n"><span class="pre">muGrid</span></span></a><span class="p"><span class="pre">::</span></span><a class="reference internal" href="CplusplusAPI.html#_CPPv4N6muGrid15FieldCollectionE" title="muGrid::FieldCollection"><span class="n"><span class="pre">FieldCollection</span></span></a><span class="p"><span class="pre">::</span></span></span><span class="sig-name descname"><span class="n"><span class="pre">get_field</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">const</span></span><span class="w"> </span><a class="reference internal" href="CplusplusAPI.html#_CPPv4St" title="std"><span class="n"><span class="pre">std</span></span></a><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">string</span></span><span class="w"> </span><span class="p"><span class="pre">&amp;</span></span><span class="n sig-param"><span class="pre">unique_name</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N6muGrid15FieldCollection9get_fieldERKNSt6stringE" title="Link to this definition">¶</a><br /></dt>
<dd><p>returns a (base-type) reference to the field identified by <code class="docutils literal notranslate"><span class="pre">unique_name</span></code>. Throws a <code class="docutils literal notranslate"><a class="reference internal" href="CplusplusAPI.html#classmuGrid_1_1FieldCollectionError"><span class="std std-ref"><span class="pre">muGrid::FieldCollectionError</span></span></a></code> if the field does not exist. </p>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N6muGrid15FieldCollection15get_state_fieldERKNSt6stringE">
<span id="_CPPv3N6muGrid15FieldCollection15get_state_fieldERKNSt6stringE"></span><span id="_CPPv2N6muGrid15FieldCollection15get_state_fieldERKNSt6stringE"></span><span id="muGrid::FieldCollection::get_state_field__ssCR"></span><span class="target" id="classmuGrid_1_1FieldCollection_1acecf93ca7d19bc047e413d3deb75304c"></span><a class="reference internal" href="CplusplusAPI.html#_CPPv4N6muGrid10StateFieldE" title="muGrid::StateField"><span class="n"><span class="pre">StateField</span></span></a><span class="w"> </span><span class="p"><span class="pre">&amp;</span></span><span class="sig-prename descclassname"><a class="reference internal" href="CplusplusAPI.html#_CPPv46muGrid" title="muGrid"><span class="n"><span class="pre">muGrid</span></span></a><span class="p"><span class="pre">::</span></span><a class="reference internal" href="CplusplusAPI.html#_CPPv4N6muGrid15FieldCollectionE" title="muGrid::FieldCollection"><span class="n"><span class="pre">FieldCollection</span></span></a><span class="p"><span class="pre">::</span></span></span><span class="sig-name descname"><span class="n"><span class="pre">get_state_field</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">const</span></span><span class="w"> </span><a class="reference internal" href="CplusplusAPI.html#_CPPv4St" title="std"><span class="n"><span class="pre">std</span></span></a><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">string</span></span><span class="w"> </span><span class="p"><span class="pre">&amp;</span></span><span class="n sig-param"><span class="pre">unique_prefix</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N6muGrid15FieldCollection15get_state_fieldERKNSt6stringE" title="Link to this definition">¶</a><br /></dt>
<dd><p>returns a (base-type) reference to the state field identified by <code class="docutils literal notranslate"><span class="pre">unique_prefix</span></code>. Throws a <code class="docutils literal notranslate"><a class="reference internal" href="CplusplusAPI.html#classmuGrid_1_1FieldCollectionError"><span class="std std-ref"><span class="pre">muGrid::FieldCollectionError</span></span></a></code> if the state field does not exist. </p>
</dd></dl>

<p>Given a pixel/voxel coordinate or index, the position of the associated
pixel/voxel data is a function of the type of field (global or local). Since
the determination procedure is identical for every field defined on the same
domain, this ability (and the associated overhead) can be centralised into a
manager of field collections.</p>
<p><em>µ</em>Grid’s abstraction for field access and management is the <strong>field
collection</strong> represented by the two classes
<a class="reference internal" href="CplusplusAPI.html#_CPPv4N6muGrid20LocalFieldCollectionE" title="muGrid::LocalFieldCollection"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">LocalFieldCollection&lt;Dim&gt;</span></code></a> and
<a class="reference internal" href="CplusplusAPI.html#_CPPv4N6muGrid20LocalFieldCollectionE" title="muGrid::LocalFieldCollection"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">LocalFieldCollection&lt;Dim&gt;</span></code></a>, see <a class="reference internal" href="#field-collection"><span class="std std-ref">Field Collections</span></a>.</p>
</section>
<section id="state-or-history-variables">
<span id="state-field"></span><h2>State or History Variables<a class="headerlink" href="#state-or-history-variables" title="Link to this heading">¶</a></h2>
<p>Some fields hold state or history variables, i.e., such fields have a current
value and one or more old values. This is particularly common for internal
variables of inelastic materials (e.g., damage variables, plastic flow,
e.t.c.). The straight-forward way of handling this situation is to define a
current field, and one or more fields of the same type to hold old values. This
approach has the disadvantages that it leads to a multitude of variables to keep
track of, and that the values need to by cycled between the fields using a copy;
this approach is both inefficient and error-prone.</p>
<dl class="simple">
<dt><em>µ</em>Grid addresses this situation with the state field abstraction. A state</dt><dd><p>field is an encapsulated container of fields in a single variable. It allows to
access the current field values globally, and gives read-only access to old
field values globally. Iterative per-pixel access is handled through state
field maps which, similarly to the field map, allow to iterate though all
pixels/voxels on which the field is defined, and the iterates give access to
the current value at the pixel/voxel or read-only access to the old values.</p>
</dd>
</dl>
</section>
<section id="mapped-fields">
<h2>Mapped Fields<a class="headerlink" href="#mapped-fields" title="Link to this heading">¶</a></h2>
<p>Some fields are only ever going to be used by one entity (e.g., internal
variables of a material). For these fields, the flexibility of the field/field
collection/field map paradigm can be a burden. Mapped fields are an
encapsulation of a field and a corresponding map into a single object,
drastically reducing boilerplate code.</p>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="CodingConvention.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Coding Convention</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="Python.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Python Bindings</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2017-2022 Till Junge, 2018-2024 Lars Pastewka
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">C++ Bindings</a><ul>
<li><a class="reference internal" href="#common-type-aliases">Common Type Aliases</a><ul>
<li><a class="reference internal" href="#_CPPv45Dim_t"><code class="docutils literal notranslate"><span class="pre">Dim_t</span></code></a></li>
<li><a class="reference internal" href="#_CPPv47Index_t"><code class="docutils literal notranslate"><span class="pre">Index_t</span></code></a></li>
<li><a class="reference internal" href="#_CPPv44Uint"><code class="docutils literal notranslate"><span class="pre">Uint</span></code></a></li>
<li><a class="reference internal" href="#_CPPv43Int"><code class="docutils literal notranslate"><span class="pre">Int</span></code></a></li>
<li><a class="reference internal" href="#_CPPv44Real"><code class="docutils literal notranslate"><span class="pre">Real</span></code></a></li>
<li><a class="reference internal" href="#_CPPv47Complex"><code class="docutils literal notranslate"><span class="pre">Complex</span></code></a></li>
<li><a class="reference internal" href="#_CPPv48Ccoord_t"><code class="docutils literal notranslate"><span class="pre">Ccoord_t</span></code></a></li>
<li><a class="reference internal" href="#_CPPv48Rcoord_t"><code class="docutils literal notranslate"><span class="pre">Rcoord_t</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#field-types">Field Types</a></li>
<li><a class="reference internal" href="#fields">Fields</a></li>
<li><a class="reference internal" href="#field-maps">Field Maps</a></li>
<li><a class="reference internal" href="#field-collections">Field Collections</a><ul>
<li><a class="reference internal" href="#_CPPv4N6muGrid15FieldCollection9get_fieldERKNSt6stringE"><code class="docutils literal notranslate"><span class="pre">get_field()</span></code></a></li>
<li><a class="reference internal" href="#_CPPv4N6muGrid15FieldCollection15get_state_fieldERKNSt6stringE"><code class="docutils literal notranslate"><span class="pre">get_state_field()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#state-or-history-variables">State or History Variables</a></li>
<li><a class="reference internal" href="#mapped-fields">Mapped Fields</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script src="_static/documentation_options.js?v=d01cac86"></script>
    <script src="_static/doctools.js?v=9bcbadda"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/scripts/furo.js?v=5fa4622c"></script>
    </body>
</html>